import{u as I}from"./useFocusStore-BPJakuaF.js";import{d as J,s as M,k as f,l as w,w as A,c as l,a as t,j as p,b as x,u as r,F as N,n as P,t as d,o}from"./index-DI1Regv2.js";const T={class:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden flex flex-col h-full"},V={class:"p-4 sm:p-6 border-b border-slate-100 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},B={class:"flex space-x-2 w-full sm:w-auto"},H={class:"overflow-x-auto -mx-4 sm:mx-0 pb-4 sm:pb-0"},R={class:"inline-block min-w-full align-middle px-4 sm:px-0"},D={class:"min-w-full text-left border-collapse"},z={class:"divide-y divide-slate-100 text-xs sm:text-sm"},L={key:0},O={class:"p-3 sm:p-4 font-medium text-slate-700 whitespace-nowrap"},$={class:"p-3 sm:p-4 text-primary font-bold whitespace-nowrap"},q=["title"],G={class:"p-3 sm:p-4 text-slate-600 min-w-[120px] whitespace-nowrap"},K={key:0,class:"text-secondary font-medium"},Q={key:1,class:"text-slate-300"},U={class:"p-3 sm:p-4 text-center whitespace-nowrap"},W={class:"flex justify-center space-x-1"},X={key:0,class:"px-2 py-0.5 rounded-full text-xs bg-orange-100 text-orange-700"},Y={key:1,class:"px-2 py-0.5 rounded-full text-xs bg-pink-100 text-pink-700"},Z={key:2,class:"px-2 py-0.5 rounded-full text-xs bg-slate-100 text-slate-500"},tt={class:"p-3 sm:p-4 text-right whitespace-nowrap"},et=["onClick"],st={class:"px-4 sm:px-0 flex justify-end items-center mt-4"},lt=["disabled"],ot={class:"px-3 py-2 bg-slate-100 text-sm"},nt=["disabled"],u=13,pt=J({__name:"HistoryView",setup(at){const i=I(),{records:c}=M(i),g=()=>i.exportToMarkdown(),_=()=>i.exportToJson(),v=a=>i.deleteRecord(a),y=a=>i.importFromJson(a),k=()=>i.clearAll(),C=()=>{window.confirm("âš ï¸ ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼")&&k()},b=f(null),j=()=>{b.value?.click()},S=a=>{const e=a.target.files[0];e&&y(e)};let n=f(1);const m=w(()=>Math.max(1,Math.ceil(c.value.length/u)));let h=w(()=>{const a=(n.value-1)*u,e=a+u;return c.value.slice(a,e)});const F=()=>{n.value>1&&n.value--},E=()=>{n.value<m.value&&n.value++};return A(c,()=>{n.value=1}),(a,e)=>(o(),l("div",T,[t("div",V,[e[4]||(e[4]=t("h2",{class:"text-xl sm:text-2xl font-bold text-slate-800"},"è¿‡å¾€è®°å½•",-1)),t("div",B,[t("button",{onClick:g,class:"flex-1 sm:flex-none justify-center bg-slate-400 hover:bg-slate-700 text-white text-xs sm:text-sm px-3 py-2 rounded-lg transition flex items-center shadow-sm"},[...e[0]||(e[0]=[t("span",{class:"mr-1"},"â¬‡ï¸",-1),x(" MD ",-1)])]),t("button",{onClick:_,class:"flex-1 sm:flex-none justify-center bg-white hover:bg-slate-50 text-slate-700 text-xs sm:text-sm px-3 py-2 rounded-lg transition flex items-center border border-slate-300 shadow-sm"},[...e[1]||(e[1]=[t("span",{class:"mr-1"},"â¬‡ï¸",-1),x(" JSON ",-1)])]),t("input",{type:"file",accept:".json",onChange:S,ref_key:"fileInput",ref:b,class:"hidden"},null,544),t("button",{onClick:j,class:"flex-1 sm:flex-none justify-center bg-slate-200 hover:bg-slate-700 text-white text-xs sm:text-sm px-3 py-2 rounded-lg transition flex items-center shadow-sm"},[...e[2]||(e[2]=[t("span",{class:"mr-1"},"â™¦ï¸",-1),x(" Import ",-1)])]),r(c).length>0?(o(),l("button",{key:0,onClick:C,class:"flex-1 sm:flex-none justify-center bg-red-500 hover:bg-red-700 text-white text-xs sm:text-sm px-3 py-2 rounded-lg transition flex items-center shadow-sm"},[...e[3]||(e[3]=[t("span",{class:"mr-1"},"ðŸ—‘ï¸",-1),x(" Clear All ",-1)])])):p("",!0)])]),t("div",H,[t("div",R,[t("table",D,[e[6]||(e[6]=t("thead",null,[t("tr",{class:"bg-slate-50 text-slate-500 text-xs font-semibold uppercase tracking-wider"},[t("th",{class:"p-3 sm:p-4 border-b whitespace-nowrap"},"æ—¥æœŸ"),t("th",{class:"p-3 sm:p-4 border-b whitespace-nowrap"},"æ—¶é•¿"),t("th",{class:"p-3 sm:p-4 border-b whitespace-nowrap"},"æè¿°"),t("th",{class:"p-3 sm:p-4 border-b whitespace-nowrap"},"ç‰¹æ®Šäº‹ä»¶"),t("th",{class:"p-3 sm:p-4 border-b whitespace-nowrap text-center"},"æ ‡ç­¾"),t("th",{class:"p-3 sm:p-4 border-b text-right whitespace-nowrap"},"æ“ä½œ")])],-1)),t("tbody",z,[r(h).length===0?(o(),l("tr",L,[...e[5]||(e[5]=[t("td",{colspan:"6",class:"p-8 text-center text-slate-400"},"æš‚æ— è®°å½•",-1)])])):p("",!0),(o(!0),l(N,null,P(r(h),s=>(o(),l("tr",{key:s.id,class:"hover:bg-slate-50 transition bg-white"},[t("td",O,d(s.date),1),t("td",$,d(s.hours)+"h ",1),t("td",{class:"p-3 sm:p-4 text-slate-600 min-w-[140px] max-w-[200px] truncate",title:s.description},d(s.description),9,q),t("td",G,[s.isSpecialEvent?(o(),l("span",K,d(s.specialEventContent),1)):(o(),l("span",Q,"-"))]),t("td",U,[t("div",W,[s.isHoliday?(o(),l("span",X,"å‡")):p("",!0),s.isSpecialEvent?(o(),l("span",Y,"ç‰¹")):p("",!0),!s.isHoliday&&!s.isSpecialEvent?(o(),l("span",Z,"æ—¥å¸¸")):p("",!0)])]),t("td",tt,[t("button",{onClick:it=>v(s.id),class:"text-red-400 hover:text-red-600 p-1"}," åˆ é™¤ ",8,et)])]))),128))])])])]),t("div",st,[t("button",{onClick:F,disabled:r(n)===1,class:"px-3 py-2 bg-slate-200 hover:bg-slate-300 text-sm rounded-l-lg disabled:bg-slate-100 disabled:cursor-not-allowed"}," ä¸Šä¸€é¡µ ",8,lt),t("span",ot,d(r(n))+" / "+d(m.value),1),t("button",{onClick:E,disabled:r(n)===m.value,class:"px-3 py-2 bg-slate-200 hover:bg-slate-300 text-sm rounded-r-lg disabled:bg-slate-100 disabled:cursor-not-allowed"}," ä¸‹ä¸€é¡µ ",8,nt)])]))}});export{pt as default};
